{% extends 'base.html.twig' %}

{% block title %}{{ 'user.index.title'|trans }}{% endblock %}

{% block body %}
<div class="mb-3">
    <form method="get" action="">
        <select name="_locale" onchange="this.form.submit()" class="form-select w-auto d-inline-block">
            <option value="en" {% if app.request.get('_locale') == 'en' %}selected{% endif %}>English ğŸ‡¬ğŸ‡§</option>
            <option value="fr" {% if app.request.get('_locale') == 'fr' %}selected{% endif %}>FranÃ§ais ğŸ‡«ğŸ‡·</option>
        </select>
    </form>
</div>

<h1>{{ 'user.index.title'|trans }}</h1>

<div class="d-flex justify-content-between align-items-center mb-3">
    <a href="{{ path('app_user_download_pdf') }}" class="btn btn-primary">{{ 'user.index.download_pdf'|trans }}</a>
</div>

<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>{{ 'user.index.cin'|trans }}</th>
            <th>{{ 'user.index.tel'|trans }}</th>
            <th>{{ 'user.index.nom'|trans }}</th>
            <th>{{ 'user.index.prenom'|trans }}</th>
            <th>{{ 'user.index.email'|trans }}</th>
            <th>{{ 'user.index.roles'|trans }}</th>
            <th>{{ 'user.index.id'|trans }}</th>
            <th>{{ 'user.index.actions'|trans }}</th>
        </tr>
    </thead>
    <tbody>
    {% for user in pagination %}
        <tr>
            <td>{{ user.cin }}</td>
            <td>{{ user.tel }}</td>
            <td>{{ user.nom }}</td>
            <td>{{ user.prenom }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.roles|join(', ') }}</td>
            <td>{{ user.id }}</td>
            <td>
                <a class="btn btn-info" href="{{ path('app_user_show', {'cin': user.cin}) }}">{{ 'user.index.show'|trans }}</a>
                <a class="btn btn-warning" href="{{ path('app_user_edit', {'cin': user.cin}) }}">{{ 'user.index.edit'|trans }}</a>
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="8">{{ 'user.index.no_records'|trans }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<div class="d-flex justify-content-center mt-4">
    {{ knp_pagination_render(pagination) }}
</div>

<a href="{{ path('app_user_new') }}" class="btn btn-success mt-3">{{ 'user.index.create'|trans }}</a>

{% endblock %}
