{% extends 'base.html.twig' %}

{% block title %}Inscription √† un S√©minaire{% endblock %}

{% block body %}
    <div class="container my-5">
        <div class="col-md-10 col-lg-8 mx-auto">
            <div class="card shadow-xl rounded-5 border-0 form-card" style="animation: slideIn 0.6s ease-out forwards;">
                <div class="card-header bg-gradient text-white text-center py-5 rounded-top-5">
                    <h2 class="fw-bold mb-0" style="font-size: 2rem;">
                        Inscription √† {{ seminaire ? seminaire.nomSeminaire : 'un s√©minaire' }}
                    </h2>
                </div>
                <div class="card-body p-5" style="background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%);">
                    {{ form_start(form, {'attr': {'novalidate': 'novalidate', 'class': 'form-animated'}}) }}

                    {% for field in form %}
                        {% if field.vars.name != 'seminaire' %}
                            <div class="form-group mb-4 position-relative" style="animation: fadeIn 0.8s ease-out {{ loop.index * 0.1 }}s both;">
                                {{ form_label(field, null, {
                                    'label_attr': {
                                        'class': 'form-label fw-semibold text-dark',
                                        'style': 'font-size: 1.1rem;'
                                    }
                                }) }}
                                <div class="input-wrapper">
                                    {% if field.vars.name == 'dateInscription' %}
                                        <span class="input-icon">üìÖ</span>
                                    {% elseif field.vars.name == 'statut' %}
                                        <span class="input-icon">üìã</span>
                                    {% elseif field.vars.name == 'evaluation' %}
                                        <span class="input-icon">‚≠ê</span>
                                    {% elseif field.vars.name == 'certificat' %}
                                        <span class="input-icon">üèÜ</span>
                                    {% elseif field.vars.name == 'idEmploye' %}
                                        <span class="input-icon">üßë</span>
                                    {% endif %}
                                    {{ form_widget(field, {
                                        'attr': {
                                            'class': 'form-control form-control-lg' ~ (not field.vars.valid ? ' is-invalid' : ''),
                                            'value': field.vars.value is not empty ? field.vars.value : null
                                        }
                                    }) }}
                                </div>
                                {% for error in field.vars.errors %}
                                    <div class="invalid-feedback d-block mt-1">
                                        {{ error.message }}
                                    </div>
                                {% endfor %}
                            </div>
                        {% else %}
                            {# Hidden seminar field #}
                            {{ form_widget(field, {'attr': {'style': 'display: none;'}}) }}
                        {% endif %}
                    {% endfor %}

                    <div class="d-flex gap-3 mt-5">
                        <button type="submit" class="btn btn-gradient w-100 py-3" id="submitBtn">
                            <span class="btn-content">
                                <span class="btn-icon">‚úÖ</span>
                                <span class="btn-text">{{ button_label|default('S\'inscrire') }}</span>
                                <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                            </span>
                        </button>
                        <a href="{{ path('app_seminaire_index') }}" class="btn btn-secondary w-100 py-3">
                            <span class="btn-content">
                                <span class="btn-icon">‚Üê</span>
                                <span class="btn-text">Retour</span>
                            </span>
                        </a>
                    </div>

                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>

    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4895ef;
            --primary-dark: #3f37c9;
            --secondary: #4cc9f0;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #02c39a;
            --warning: #ff9f1c;
            --danger: #e5383b;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
            --shadow-md: 0 5px 15px rgba(0,0,0,0.08);
            --shadow-lg: 0 15px 30px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 40px rgba(0,0,0,0.12);
            --transition-fast: 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-medium: 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --border-radius-sm: 0.5rem;
            --border-radius-md: 1rem;
            --border-radius-lg: 2rem;
            --border-radius-xl: 2.5rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .form-card {
            background: #fff;
            overflow: hidden;
            transition: transform var(--transition-medium), box-shadow var(--transition-medium);
        }

        .form-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .card-header.bg-gradient {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            background-size: 200% 200%;
            animation: gradientShift 5s ease infinite;
            border-bottom: none;
        }

        .card-body {
            padding: 3rem !important;
        }

        .form-group {
            position: relative;
        }

        .form-label {
            color: var(--dark);
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            transition: color var(--transition-fast);
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .input-icon {
            position: absolute;
            left: 20px;
            font-size: 1.3rem;
            opacity: 0.6;
            z-index: 2;
            transition: opacity var(--transition-fast);
        }

        .form-control {
            padding-left: 3.5rem;
            border-radius: var(--border-radius-md);
            border: 1px solid rgba(0, 0, 0, 0.1);
            font-size: 1.1rem;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-sm);
        }

        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(67, 97, 238, 0.2);
            outline: none;
        }

        .form-control-lg {
            padding: 1rem 1.5rem 1rem 3.5rem;
            font-size: 1.1rem;
        }

        select.form-control {
            appearance: none;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path fill="%234361ee" d="M2 4l4 4 4-4z"/></svg>') no-repeat right 1.5rem center;
            background-size: 12px;
        }

        .input-wrapper:focus-within .input-icon {
            opacity: 1;
            animation: pulse 1s infinite;
        }

        .invalid-feedback {
            font-size: 0.95rem;
            color: var(--danger);
            animation: fadeIn 0.3s ease-in-out;
        }

        .btn-gradient {
            position: relative;
            overflow: hidden;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            background-size: 200% 200%;
            animation: gradientShift 5s ease infinite;
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 1.1rem;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-md);
        }

        .btn-gradient:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
            color: white;
        }

        .btn-gradient:active {
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .btn-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .btn-icon {
            transition: transform var(--transition-fast);
            font-size: 1.2rem;
        }

        .btn-gradient:hover .btn-icon {
            transform: scale(1.2);
        }

        .btn-secondary {
            background: linear-gradient(45deg, var(--dark), #6c757d);
            background-size: 200% 200%;
            animation: gradientShift 5s ease infinite;
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            font-size: 1.1rem;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
            color: white;
        }

        .btn-secondary:active {
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .form-animated {
            opacity: 0;
            animation: fadeIn 1s ease-out 0.3s forwards;
        }

        @media (max-width: 767px) {
            .card-body {
                padding: 2rem !important;
            }

            .form-control-lg {
                padding: 0.75rem 1.25rem 0.75rem 3rem;
                font-size: 1rem;
            }

            .form-label {
                font-size: 1rem;
            }

            .btn-gradient, .btn-secondary {
                padding: 0.75rem 1.5rem;
                font-size: 1rem;
            }

            .btn-icon {
                font-size: 1rem;
            }

            .d-flex.gap-3 {
                flex-direction: column;
                gap: 1.25rem;
            }

            .input-icon {
                left: 15px;
                font-size: 1.2rem;
            }
        }
    </style>

    <script>
        document.getElementById('submitBtn').addEventListener('click', function() {
            const spinner = this.querySelector('.spinner-border');
            const text = this.querySelector('.btn-text');
            if (spinner && text) {
                spinner.classList.remove('d-none');
                text.textContent = 'Envoi...';
            }
        });
    </script>
{% endblock %}