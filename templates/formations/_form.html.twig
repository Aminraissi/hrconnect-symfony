<div class="">
	{{ form_start(form, {'attr': {'novalidate': 'novalidate', 'enctype': 'multipart/form-data'}}) }}

	{% if not form.vars.valid %}
		<div class="alert alert-danger p-4">
			<i class="fas fa-times-circle"></i>
			Le formulaire comporte des erreurs. Veuillez les corriger avant de soumettre.
		</div>
	{% endif %}

	{# --- 1. Basic Information --- #}
	<div class="col-xl-12 col-sm-12 col-12">
		<div class="card">
			<div class="card-header">
				<h2 class="card-titles">Informations de base
					<span>Détails généraux de la formation.</span>
				</h2>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-xl-6 col-sm-12 col-12">
						<div class="form-group">
							{{ form_widget(form.title, {'attr': {'class': 'form-control', 'placeholder': 'Titre'}}) }}
							<div class="text-danger error-text error-text">{{ form_errors(form.title) }}</div>
						</div>
					</div>
					<div class="col-xl-6 col-sm-12 col-12">
						<div
							class="form-group">
							{# {{ form_widget(form.image, {'attr': {'class': 'form-control', 'placeholder': 'Image'}}) }} #}
							<input
							type="file" name="image" accept="image/*" class="form-control"/>

						{# <div class="text-danger error-text">{{ form_errors(form.image) }}</div> #}
						</div>
					</div>
				</div>
				<div class="form-group">
					{{ form_widget(form.description, {'attr': {'class': 'form-control', 'placeholder': 'Description'}}) }}
					<div class="text-danger error-text">{{ form_errors(form.description) }}</div>
				</div>
			</div>
		</div>
	</div>

	{# --- 2. Availability & Location --- #}
	<div class="col-xl-12 col-sm-12 col-12 mt-4">
		<div class="card">
			<div class="card-header">
				<h2 class="card-titles">Disponibilité et localisation
					<span>Où et à qui la formation est disponible.</span>
				</h2>
			</div>
			<div class="card-body">
				<div class="row mb-3">
					<div class="col-xl-6 col-sm-12 col-12">
						<div class="form-check form-switch">
							Formation en ligne :

							{{ form_widget(form.is_online, {'attr': {'class': 'form-check-input', 'id': 'isonline', 'data-toggle': 'toggle', 'data-on': 'OUI', 'data-off': 'NON'}}) }}

							<div class="text-danger error-text">{{ form_errors(form.is_online) }}</div>
						</div>
					</div>
					<div class="col-xl-12 col-sm-12 col-12">
						<div class="form-group" id="f_place">
							{{ form_widget(form.place, {'attr': {'class': 'form-control', 'placeholder': 'Lieu'}}) }}
							<div id="map"></div>

							<div class="text-danger error-text">{{ form_errors(form.place) }}</div>
						</div>
					</div>
				</div>
				<div class="row mb-3" id="f_lat_lng">
					<div class="col-xl-6 col-sm-12 col-12">
						<div class="form-group">
							{{ form_widget(form.lat, {'attr': {'class': 'form-control', 'placeholder': 'Latitude'}}) }}
							<div class="text-danger error-text">{{ form_errors(form.lat) }}</div>
						</div>
					</div>
					<div class="col-xl-6 col-sm-12 col-12">
						<div class="form-group">
							{{ form_widget(form.lng, {'attr': {'class': 'form-control', 'placeholder': 'Longitude'}}) }}
							<div class="text-danger error-text">{{ form_errors(form.lng) }}</div>
						</div>
					</div>
				</div>
				<div class="row mb-3">
					<div class="col-xl-12 col-sm-12 col-12">
						<div class="form-check">
							{{ form_label(form.available_for_employee, 'Disponible pour les employés :', {'label_attr': {'class': 'form-check-label ms-2'}}) }}
							{{ form_widget(form.available_for_employee, {'attr': {'class': 'form-check-input', 'data-toggle': 'toggle', 'data-on': 'YES', 'data-off': 'NO'}}) }}
							<div class="text-danger error-text">{{ form_errors(form.available_for_employee) }}</div>
						</div>
					</div>
					<div class="col-xl-12 col-sm-12 col-12 mt-3">
						<div class="form-check">
							{{ form_label(form.available_for_intern, 'Disponible pour stagiaires', {'label_attr': {'class': 'form-check-label ms-2'}}) }} :
							{{ form_widget(form.available_for_intern, {'attr': {'class': 'form-check-input', 'data-toggle': 'toggle', 'data-on': 'YES', 'data-off': 'NO'}}) }}
							<div class="text-danger error-text">{{ form_errors(form.available_for_intern) }}</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	{# --- 3. Schedule & Assignment --- #}
	<div class="col-xl-12 col-sm-12 col-12 mt-4">
		<div class="card">
			<div class="card-header">
				<h2 class="card-titles">Horaire et affectation
					<span>Gérer le calendrier, le formateur et les participants.</span>
				</h2>
			</div>
			<div class="card-body">
				<div class="row mb-3">
					<div class="col-xl-6 col-sm-12 col-12">
						<div class="form-group">
							{{ form_widget(form.start_date, {'attr': {'class': 'form-control'}}) }}
							<div class="text-danger error-text">{{ form_errors(form.start_date) }}</div>
						</div>
					</div>
					<div class="col-xl-6 col-sm-12 col-12">
						<div class="form-group">
							{{ form_widget(form.end_date, {'attr': {'class': 'form-control'}}) }}
							<div class="text-danger error-text">{{ form_errors(form.end_date) }}</div>
						</div>
					</div>
				</div>
				<div class="row mb-3">
					<div class="col-xl-6 col-sm-12 col-12">
						<div class="form-group">
							{{ form_widget(form.price, {'attr': {'class': 'form-control', 'placeholder': 'Prix'}}) }}
							<div class="text-danger error-text">{{ form_errors(form.price) }}</div>
						</div>
					</div>
					<div class="col-xl-6 col-sm-12 col-12">
						<div class="form-group">
							{{ form_widget(form.formateur, {'attr': {'class': 'form-select'}}) }}
							<div class="text-danger error-text">{{ form_errors(form.formateur) }}</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row mt-4">
			<div class="col-xl-12 col-sm-12 col-12">
				<div class="form-btn">
					<button type="submit" class="btn btn-apply w-auto">{{ button_label|default('Enregister') }}</button>
					<a href="{{ path('app_formations_index') }}" class="btn btn-secondary">Annuler</a>
				</div>
			</div>
		</div>
	</div>

	{{ form_end(form) }}
</div>
